---
title: "You don't know JavaScript Yet:#2 æ¦‚è§€JS"
date: "2020-01-02"
category: "FullStack"
cover: "/images/you-dont-know-js.png"
tags:
  - JavaScript
  - YDKJSY
---

é€™æ˜¯æˆ‘é–±è®€[You don't know JavaScript Yet](https://github.com/getify/You-Dont-Know-JS)çš„è®€æ›¸ç­†è¨˜ï¼Œ
é€™ç« ç¯€ä¸»è¦çš„å…§å®¹åœ¨è¬›è¿°å€¼ã€å‹åˆ¥ã€å‡½æ•¸ã€æ¯”è¼ƒç­‰ç­‰ï¼Œé€™ä¸ç®—æ˜¯ä¸€å€‹ã€ŒJSå…¥é–€ã€çš„ç« ç¯€ï¼Œæ‰€ä»¥ä¸æœƒæœ‰å¤ªå¤šè©³ç´°çš„ä»‹ç´¹ï¼Œ
æ›´å¤šæ˜¯ç¨å¾®æåˆ°æˆ–è€…æ˜¯é»é†’è®€è€…ä¸€äº›å¯èƒ½èªçŸ¥ä¸Šçš„èª¤è§£ã€‚

## å€¼(Values)

å€¼çš„æ¦‚å¿µæœ‰ä¸€é»æŠ½è±¡ï¼Œå®ƒæ˜¯ç¨‹å¼ä¸­æœ€åŸºæœ¬çš„å–®å…ƒï¼Œå®ƒå¯ä»¥æ˜¯æ•¸å­—æˆ–è€…å­—ä¸²ç”šè‡³æ˜¯å¹¾ä½•å­¸ä¸Šçš„ä¸€å€‹é»ã€‚
å€¼å¯ä»¥ç”¨å…©ç¨®å½¢å¼è¡¨ç¾:**åŸå§‹å€¼(Primitive Values)**èˆ‡**ç‰©ä»¶(Object)**ã€‚

ç°¡å–®çš„ä¾‹å­:

```javascript
console.log("æˆ‘çš„åå­å«Papan01");
console.log(23);
```

å¾ä¸Šé¢çš„ä¾‹å­ä¾†çœ‹`"æˆ‘çš„åå­å«Papan01"`èˆ‡`23`å°±æ˜¯åŸå§‹å€¼ï¼Œèªæ„ä¸Šå°±æ˜¯åŸå§‹å®šç¾©çš„å€¼ï¼Œå®ƒå€‘ç„¡æ³•è¢«æ”¹è®Šï¼Œä¾‹å¦‚`2`ä½ ä¸èƒ½è®“å®ƒæŒ‡å®šè®Šæˆ`3`æˆ–è€…åœ¨ç¨‹å¼çš„åˆ¥çš„åœ°æ–¹åˆå‰µé€ ä¸€å€‹`2`ã€‚

æˆ‘å€‘åœ¨è¡¨ç¤ºå­—ä¸²çš„æ™‚å€™å¯ä»¥ä½¿ç”¨`"`æˆ–è€…`'`ä¾†åœä½å®ƒï¼Œé¸æ“‡å…¶ä¸­ä¸€å€‹ä¸¦ä¸”åœ¨ä½ çš„ç¨‹å¼ä¸­ä¿æŒä¸€è‡´æ€§ï¼Œæœ‰åŠ©æ–¼æ—¥å¾Œçš„ç¶­è­·èˆ‡å¯è®€æ€§ã€‚
é‚„æœ‰å¦å¤–ä¸€ç¨®å°±æ˜¯ç•¶ä½ æƒ³åœ¨ä½ çš„å­—ä¸²ä¸­ç©¿æ’è®Šæ•¸ï¼Œä½ å¯ä»¥ä½¿ç”¨`` ` ``ä¸¦ä¸”æ­é…`${..}`ï¼Œè€ƒæ…®ä»¥ä¸‹çš„ä¾‹å­:

```javascript
const name = "Papan01";
console.log("æˆ‘çš„åå­å«${name}")
//æˆ‘çš„åå­å«${name}

console.log("æˆ‘çš„åå­å«${name}")
//æˆ‘çš„åå­å«${name}

console.log(`æˆ‘çš„åå­å«${name}`)
//æˆ‘çš„åå­å«Papan01
```

é€™ç¨±ä¹‹ç‚ºå…§æ’(Interpolation)ï¼Œä½†ç›¡é‡æ˜¯åœ¨ä½ æœ‰å¿…è¦é€²è¡Œå…§æ’æ™‚ä½¿ç”¨`` ` ``ï¼Œå¹³å¸¸æ™‚é‚„æ˜¯`"`æˆ–`'`æ“‡ä¸€ä½¿ç”¨(å–æ±ºæ–¼ä½ æ•´å€‹å°ˆæ¡ˆï¼Œè¨˜å¾—ä¿æŒä¸€è‡´æ€§)ã€‚

é‚„æœ‰å…¶ä»–çš„åŸå§‹å€¼åƒæ˜¯å¸ƒæ—(booleans)èˆ‡æ•¸å€¼(numbers)ã€‚

```javascript
while(false) {
  console.log(3.141592);
}
```

`while`çš„æ¢ä»¶å¼ç‚º`false`æ‰€ä»¥å®ƒæ°¸é ä¸æœƒé€²å…¥è¿´åœˆï¼Œå¸ƒæ—å€¼æ‰€è¡¨ç¤ºçš„å°±æ˜¯`false`ä»¥åŠèˆ‡ä¹‹ç›¸åçš„`true`ã€‚

ä¸Šé¢çš„`3.141592`å°±æ˜¯æ•¸å€¼ï¼Œè€Œé€™å€‹å°±æ˜¯å»£ç‚ºäººçŸ¥åœ¨æ•¸å­¸ä¸Šçš„PIï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥ç”¨é å…ˆå®šç¾©å¥½çš„`Math.PI`ä¾†ä»£æ›¿å®ƒï¼Œé‚„æœ‰å¦å¤–ä¸€ç¨®è®Šç¨®çš„æ•¸å€¼ç¨±ç‚º`bigint`(big-integer)ï¼Œé€™æ˜¯ç”¨ä¾†å„²å­˜è¼ƒå¤§çš„æ•¸å­—ç”¨çš„(å¯ä»¥å­˜å¤§æ–¼2çš„53æ¬¡æ–¹ä»¥ä¸Šçš„æ•¸å€¼ï¼ŒåŸæœ¬çš„numberçš„æœ€å¤§å€¼å°±ç‚º2çš„53æ¬¡æ–¹)ã€‚

é™¤äº†å­—ä¸²ã€å¸ƒæ—èˆ‡æ•¸å€¼å¤–ï¼Œé‚„æœ‰å¦å¤–å…©ç¨®åŸå§‹å€¼åœ¨JSç•¶ä¸­:`null`èˆ‡`undefined`ï¼Œé€™å…©å€‹æœ‰äº›ä¸åŒï¼Œä½†å¤šæ•¸æƒ…æ³ä¸‹è¡¨ç¤ºå®ƒå€‘æ˜¯ç©ºå€¼(æˆ–è€…ä¸å­˜åœ¨)çš„æ„æ€ã€‚
è¨±å¤šå·¥ç¨‹å¸«æŠŠå®ƒå€‘ç•¶ä½œç›¸åŒçš„æ±è¥¿ï¼Œå¤šæ•¸æƒ…æ³ä¸‹æ²’æœ‰ä»€éº¼å•é¡Œï¼Œä½†æœ€å®‰å…¨çš„æ–¹å¼é‚„æ˜¯åªä½¿ç”¨`undefined`ä¾†ä½œç‚ºç©ºå€¼çš„è¡¨ç¾ã€‚

```javascript
while(value != undefined) {
  console.log(`æ¥æ”¶åˆ°å€¼:${value}`);
}
```

æœ€å¾Œä¸€ç¨®åŸå§‹å€¼ç¨±ç‚ºSymbolï¼Œå®ƒæ˜¯ä¸€ç¨®ç‰¹æ®Šç”¨é€”çš„å€¼ï¼Œå®ƒé€šå¸¸æ‹¿ä¾†åšç‚ºç‰©ä»¶ä¸­çš„ç‰¹æ®Škeyå€¼ã€‚

```javascript
hitchhikersGuide[Symbol("foo")];
```

å¹³å¸¸æˆ‘å€‘ä¸æœƒä½¿ç”¨åˆ°Symbolï¼Œåªæœ‰åœ¨é–‹ç™¼ä¸€äº›æ¯”è¼ƒlow-levelçš„librairesæˆ–è€…frameworksæ™‚æ‰å¯èƒ½éœ€è¦ç”¨åˆ°ã€‚

### é™£åˆ—(Arrays)å’Œç‰©ä»¶(Objects)

JSä¸­çš„é™£åˆ—å¯ä»¥åŒ…å«ä»»ä½•å‹æ…‹çš„å€¼ï¼Œç„¡è«–æ˜¯åŸå§‹å€¼æˆ–è€…æ˜¯ç‰©ä»¶ï¼Œä¸¦ä¸”æœ‰é †åºçš„æ–¹å¼å„²å­˜:

```javascript
names=["Frank","Kyle","Peter","Susan"];
names.length; //4
names[0]; //Frank
names[1]; //Kyle
```

è€Œç‰©ä»¶èˆ‡é™£åˆ—é¡ä¼¼ï¼Œä½†å®ƒæ²’æœ‰é †åºä¹‹åˆ†ï¼Œä¸”åœ¨å­˜å–æ™‚ï¼Œä½¿ç”¨çš„æ˜¯ä¸€å€‹keyæˆ–è€…propertyçš„åç¨±è€Œä¸¦éåƒé™£åˆ—ä¸€æ¨£ç”¨æ•¸å­—ä½œç‚ºç´¢å¼•:

```javascript
name = {
  first: "Louis",
  last: "Peng",
  age: "31"
  specialties:["basketball"]
}
console.log(`My name is ${name.first})
```

é™¤äº†åƒä¸Šé¢é‚£ç¨®æ–¹å¼ä½¿ç”¨`name.first`å­˜å–è³‡æ–™ä»¥å¤–ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥ä½¿ç”¨`name[first]`é”åˆ°åŒæ¨£çš„æ•ˆæœã€‚

### å‹åˆ¥(Types)

ç‚ºäº†å€åˆ¥é€™äº›å€¼ï¼Œå¯ä»¥ä½¿ç”¨`typeof`ä¾†åˆ¤æ–·å®ƒçš„å‹åˆ¥æ˜¯åŸå§‹å€¼(primitive)æˆ–è€…ç‰©ä»¶(object)æˆ–è€…æ˜¯å…¶ä»–ç¨®é¡å‹:

```javascript
typeof 42;                  // "number"
typeof "abc";               // "string"
typeof true;                // "boolean"
typeof undefined;           // "undefined"
typeof null;                // "object" -- oops, JS bug!
typeof { "a": 1 };          // "object"
typeof [1,2,3];             // "object"
typeof function foo(){};    // "function"
```

é€™è£¡æœ‰å¹¾å€‹æ¯”è¼ƒå¥‡æ€ªçš„åœ°æ–¹ï¼Œ`typeof null`å¾—åˆ°çš„å»æ˜¯objectï¼Œé€™æ˜¯JSçš„å·²çŸ¥BUGï¼Œæ²’æœ‰æ”¹æ‰çš„åŸå› æ‡‰è©²æ˜¯å·²ç¶“å­˜åœ¨è¨±ä¹…ï¼Œè‹¥æ”¹æ‰å¯èƒ½æœƒå°è‡´å¾ˆå¤šç¶²é å£æ‰ã€‚
å¦ä¸€å€‹æ˜¯`typeof function`å¾—åˆ°çš„æ˜¯functioné€™å€‹æ¯”è¼ƒç‰¹åˆ¥çš„å‹åˆ¥ï¼Œä½†functionå…¶å¯¦ä¹Ÿæ˜¯objectçš„è¡ç”Ÿç‰©ï¼Œä½†ç”¨åŒæ¨£é‚è¼¯çœ‹å¾…é™£åˆ—ï¼Œ`typeof [1,2,3]`å¾—åˆ°çš„å»æ˜¯
objectã€‚

## è®Šæ•¸(Variables)

è®Šæ•¸å¿…é ˆåœ¨ä½¿ç”¨å‰å…ˆé€²è¡Œå®£å‘Š(declared)ï¼Œå¯ä»¥é€éè­˜åˆ¥å­—(identifier)ä¾†é€²è¡Œå®£å‘Šï¼Œè€ƒæ…®ä»¥ä¸‹é€™ç¨®ä¾‹å­:

```javascript
var name = "Kyle";
var age;
```

`var`é€™å€‹è­˜åˆ¥å­—ç‚ºå…¶ä¸­ä¸€ç¨®å®£å‘Šè®Šæ•¸çš„æ–¹å¼ï¼Œå†çœ‹çœ‹å¦å¤–ä¸€ç¨®æ–¹å¼:

```javascript
let name = "Kyle";
let age;
```

ä½¿ç”¨`let`è·Ÿä½¿ç”¨`var`æœ‰äº›ä¸åŒä¹‹è™•ï¼Œæœƒå› ç‚ºæ‰€åœ¨çš„ç¯„ç–‡(Scope)è€Œæœ‰ä¸ä¸€æ¨£çš„å­˜å–é™åˆ¶ï¼Œçœ‹çœ‹ä»¥ä¸‹çš„ä¾‹å­:

```javascript
var adult = true;

if(adult) {
  var name = "Kyle";
  let age = 39;
  console.log("LOL!");
}

console.log(name);
// Kyle
console.log(age);
// Error!
```

åœ¨`if`é€™å€‹ç¯„ç–‡è£¡é¢æœ‰ä½¿ç”¨`var`å®£å‘Šçš„nameèˆ‡ä½¿ç”¨`let`å®£å‘Šçš„ageï¼Œä½†åœ¨é›¢é–‹äº†é€™å€‹ç¯„ç–‡ä¹‹å¾Œï¼Œnameä¾èˆŠå¯ä»¥å¾ä¸­ç²å¾—è¨Šæ¯ï¼Œä½†ç•¶æˆ‘å€‘æƒ³å–å¾—ageæ™‚ï¼Œå°±æœƒæ‹‹å‡ºéŒ¯èª¤ï¼Œ
é€™æ„å‘³è‘—ä½¿ç”¨`var`å®ƒå°‡èƒ½å†è¢«æ›´å¤§ç¯„åœçš„åœ°æ–¹è¢«å­˜å–åˆ°ï¼Œæˆ‘å€‘é€šå¸¸æœƒå¸Œæœ›è®Šæ•¸åœ¨é›¢é–‹å®£å‘Šçš„Scopeæ™‚å°±è¢«è‡ªå‹•æ¸…é™¤ï¼Œç•¶ç„¶é€™ä¸ä»£è¡¨`var`æ¯«ç„¡ç”¨è™•ï¼Œæˆ‘å€‘ä¾èˆŠå¯ä»¥åœ¨é©ç•¶çš„åœ°æ–¹ä½¿ç”¨å®ƒã€‚

æ¥è‘—æˆ‘å€‘ä¾†çœ‹çœ‹ç¬¬ä¸‰ç¨®`const`çš„ç”¨æ³•ï¼Œå®ƒèˆ‡`let`ç›¸ä¼¼ï¼Œä½†å®ƒå¿…é ˆåœ¨å®£å‘Šæ™‚å°±è³¦äºˆå®ƒä¸€å€‹ä¸”åœ¨é€™ä¹‹å¾Œå®ƒçš„å€¼å°‡ä¸èƒ½è¢«ä¿®æ”¹:

```javascript
const myBirthday = true;
let age = 39;
if(myBirthday) {
  age += 1;           // OK!
  myBirthday = false; //Error!
}
```

æ¯”è¼ƒä»¤äººå›°æƒ‘çš„éƒ¨åˆ†æ˜¯ç•¶ä½¿ç”¨`const`ä¾†å®£å‘Šé™£åˆ—æˆ–è€…ç‰©ä»¶æ™‚ï¼Œå…¶å…§å®¹ç‰©æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ä½†ä¸èƒ½è¢«é‡æ–°è³¦äºˆæ–°çš„å€¼:

```javascript
const actors = [ "Morgan Freeman", "Jennifer Aniston"];
actors[2] = "Tom Cruise"; // OK
actors = [];              // Error!
```

æœ€å¥½çš„æ–¹å¼æ˜¯è®“`const`åªè³¦äºˆä¸€å€‹ç°¡å–®çš„åŸå§‹å€¼ï¼Œé€™æ¨£æ¯”è¼ƒæ¸…æ¥šä¸”ä¸æœƒé€ æˆæ—¥å¾Œä»–äººä¸å°å¿ƒä¿®æ”¹åˆ°ã€‚

[[info]]
| é‡å°`var`/`let`/`const`ï¼Œé€™è£¡å»ºè­°ä½¿ç”¨`let`èˆ‡`const`å°±å¥½ï¼Œç›¡å¯èƒ½åœ°é¿å…ä½¿ç”¨`var`ã€‚

## å‡½å¼(Functions)

å‡½å¼ä¸€è©åœ¨ä¸åŒçš„åœ°æ–¹æœ‰ä¸åŒçš„æ„ç¾©ï¼Œä¾‹å¦‚åœ¨FP(Functional Programming)ä¸­ï¼Œå…¶å…·æœ‰ç²¾ç¢ºçš„æ•¸å­¸å®šç¾©èˆ‡åš´æ ¼çš„è¦å‰‡ã€‚

åœ¨JSä¸­ï¼Œæˆ‘å€‘æŠŠå‡½å¼è¦–ç‚ºä¸€ç¨®ç‰¹æ®Šçš„å€¼ï¼Œå®ƒç‚ºäº†é”åˆ°æŸç¨®ç›®çš„è€Œä¸”å¯ä»¥é‡è¤‡çš„ä½¿ç”¨ï¼Œç•¶æˆ‘å€‘æä¾›ä¸€äº›inputçµ¦å‡½å¼ï¼Œå®ƒæœƒè¿”å›ä¸€å€‹æˆ–å¤šå€‹çµæœï¼Œå®ƒçœ‹èµ·ä¾†å¦‚ä¸‹:

```javascript
function awesomeFunction(coolThings) {
  // ..
  return amazingStuff;
}
```

æˆ‘å€‘é‚„å¯ä»¥æŠŠå®ƒå­˜åœ¨è®Šæ•¸ç•¶ä¸­:

```javascript
// let awesomeFunction = ..
// const awesomeFuntion = ..
var awesomeFunction = function(coolThings) {
  // ..
  return amazingStuff;
}
```

ä¸¦ä¸æ˜¯æ‰€æœ‰çš„ç¨‹å¼èªè¨€éƒ½åƒJSä¸€æ¨£æŠŠå‡½å¼ä½œç‚ºä¸€å€‹å€¼ä¸¦ä¸”å¯ä»¥å„²å­˜åœ¨è®Šæ•¸ç•¶ä¸­ã€‚æˆ‘å€‘ä¹Ÿèƒ½æŠŠå‡½å¼æ”¾é€²ç‰©ä»¶ç•¶ä¸­å¦‚åŒè®Šæ•¸ä¸€èˆ¬:

```javascript
var whatToSay = {
  greeting() {
    console.log("Hello!");
  },
  question() {
    console.log("What's you name?");
  },
  answer() {
    console.log("My name is Papan01.");
  }
}

whatToSay.greeting(); // Hello!
```

## æ¯”è¼ƒé‹ç®—(Comparisons)

åœ¨æˆ‘å€‘å¯«JSçš„æ™‚å€™è‚¯å®šæœƒç”¨åˆ°æ¯”è¼ƒé‹ç®—ï¼Œä¾‹å¦‚`>`ã€`==`ã€`===`ç­‰ç­‰ï¼Œé€™å°ç¯€æœƒæŠŠé‡é»æ”¾åœ¨`===`ä¸Šã€‚

`===`ç¨±å…¶ç‚ºåš´æ ¼ç›¸ç­‰(Strict Equality)ï¼Œæˆ‘å€‘å…ˆä¾†çœ‹ä¸€äº›ä¾‹å­:

```javascript
3 === 3.0;              // true
"yes" === "yes";        // true
null === null;          // true
false === false;        // true

42 === "42";            // false
"hello" === "Hello";    // false
true === 1;             // false
0 === null;             // false
"" === null;            // false
null === undefined;     // false
```

JSçš„åš´æ ¼ç›¸ç­‰é€šå¸¸æ¯”è¼ƒå…©é‚Šçš„å€¼(Value)èˆ‡å‹åˆ¥(Type)æ˜¯å¦ç›¸åŒä¸”ä¸å…è¨±åœ¨æ¯”è¼ƒä¸­é€²è¡Œä»»ä½•å¼·åˆ¶è½‰å‹(coercion)ï¼Œ
å†çœ‹çœ‹ä»¥ä¸‹çš„ä¾‹å­:

```javascript
NaN === NaN; // false
0 === -0;    //true
```

- NaNå› ç‚ºå®ƒä¸ç­‰æ–¼ä»»ä½•å€¼ï¼Œæ‰€ä»¥å®ƒä¹Ÿä¸ç­‰æ–¼è‡ªå·±ã€‚
- 0è·Ÿ-0ç›¸ç­‰ã€‚

é€™è£¡å»ºè­°åœ¨æ¯”è¼ƒé€™å€‹å…©å€‹æ™‚å€™ï¼Œå°æ–¼`NaN`æˆ‘å€‘å¯ä»¥ä½¿ç”¨`Number.isNaN(..)`ä¾†é€²è¡Œæ¯”è¼ƒä»¥åŠé¢å°`0`è·Ÿ`-0`æ™‚ä½¿ç”¨`Object.is(..)`ä¾†é€²è¡Œæ¯”è¼ƒï¼Œ
ä½ ä¹Ÿå¯ä»¥ç”¨`Object.is(..)`å°NaNé€²è¡Œåˆ¤æ–·ï¼Œå¯ä»¥æŠŠ`Object.is(..)`ç•¶ä½œæ¯”`===`æ›´åš´æ ¼çš„`====`ğŸ‘(ç•¶ç„¶ä½ ä¸èƒ½åœ¨ç¨‹å¼ä¸­ä½¿ç”¨å››å€‹ç­‰è™Ÿ)ã€‚

```javascript
Object.is(0, ' ');          //false
Object.is(null, undefined); //false
Object.is([1], true);       //false
Object.is(NaN, NaN);        //true
```

å†ä¾†çœ‹å¹¾å€‹ä¾‹å­ï¼Œç•¶æˆ‘å€‘ä½¿ç”¨åš´æ ¼ç›¸ç­‰é€²è¡Œç‰©ä»¶ã€é™£åˆ—ã€å‡½å¼æ¯”è¼ƒæ™‚ï¼Œå®ƒåˆè®Šå¾—æ²’é‚£éº¼ç›´è§€äº†:

```javascript
[1,2,3] === [1,2,3]          //false
{ a: 42 } === { a: 42 }      //false
( x => x*2 ) === ( x => x*2 ) //fasle
```

